<%- include('../partials/header') %>
<div class="main-container">
  <div class="table-container">
<form method="GET" action="/playlists/<%= playlist.id%>/search/results">
  <input type="text" name="q" placeholder="Search for a song..." required/>
  <button type="submit">Search</button>
</form>

<p><%= errorMsg %></p>

<div class="query-data">
<% if (queryData) { %>
  <% const results = queryData.results.trackmatches.track %>
  <table>
    <thead>
        <tr>
            <th>Title</th>
            <th>Artist</th>
            <th>Play Song</th>
            <th>Add to Playlist</th>
        </tr>
    </thead>
    <tbody>
      <% results.forEach(function(r) { %>
        <tr>
          <td><%= r.name %></td>
          <td><%= r.artist %></td>
          <td><a href="<%= r.url %>" target="_blank">Play Song</a></td>
          <td>
            <form method="POST" action="/playlists/<%= playlist.id%>/songs">
              <button type="submit">+</button>
            </form>
          </td>
        </tr>
 <% }) %>
  </tbody>
  </table>
<% } else { %>
  <!-- Note: unnecessary?
  <h3>
    Search a song!
  </h3> -->
<% } %>
</div>
</div>
</div>
<%- include('../partials/footer') %>
